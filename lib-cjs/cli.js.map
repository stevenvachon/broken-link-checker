{"version":3,"file":"cli.js","names":["_Link","require","_defaultOptions","_interopRequireDefault","_events","_gauge","_httpMethodsConstants","_chalk","_","_humanizeDuration","_longest","_keyscan","_nodeNotifier","_url","_stripAnsi","_supportsSemigraphics","_themes","_package","obj","__esModule","default","title","checker","checkerOptions","gauge","keyScanner","logOptions","pauseMessage","spinner","stats","urls","argsToOptions","args","renames","exclude","excludeExternal","excludeInternal","follow","hostRequests","include","ordered","requests","Object","entries","reduce","opts","argName","argValue","DEFAULT_OPTIONS","get","requestMethod","GET","log","hide","console","show","logPage","pageURL","white","yellow","logPageMetrics","output","gray","page","totalLinks","skippedLinks","brokenLinks","red","green","logProgress","links","numActiveLinks","numQueuedLinks","pageCompletion","recursive","numPages","numSites","logResult","result","displayed","link","IS_BROKEN","WAS_EXCLUDED","REBASED_URL","ORIGINAL_URL","BROKEN_REASON","EXCLUDED_REASON","HTTP_RESPONSE_WAS_CACHED","logResults","results","currentIndex","undefined","logSite","site","totalPages","logSiteMetrics","broken","humanizeDuration","Date","now","startTime","largest","round","separator","repeat","longest","stripAnsi","split","length","run","values","gaugeThemes","forEach","theme","preSubsection","Gauge","Statistics","SiteChecker","HtmlUrlChecker","on","HTML_EVENT","tree","robots","response","QUEUE_EVENT","JUNK_EVENT","pushResult","LINK_EVENT","PAGE_EVENT","error","code","name","message","process","exitCode","resetPage","SITE_EVENT","resetSite","END_EVENT","supportsSemigraphics","clearTimeout","disable","release","notifier","notify","ERROR_EVENT","exit","togglePause","scanKeys","key","parsed","pause","map","url","URL","pathToFileURL","enqueue","resume","spinnerInterval","setTimeout","pulse","constructor","hideCachedLink","hideCachedLinks","hideSkippedLink","hideSkippedLinks","hideUnbrokenLink","hideUnbrokenLinks","hiddenLinks","maintainLinkOrder","HTML_INDEX","push","isPaused","_default","argv","filterLevel","join","verbosity","optionator","prepend","toUpperCase","append","options","heading","option","alias","type","description","maxSocketsPerHost","maxSockets","parseArgv","parse","Error","help","generateHelp","version","packageVersion","exports","module"],"sources":["../lib/cli.js"],"sourcesContent":["/* eslint-disable no-console */\nimport {BROKEN_REASON, EXCLUDED_REASON, HTML_INDEX, HTTP_RESPONSE_WAS_CACHED, IS_BROKEN, ORIGINAL_URL, REBASED_URL, WAS_EXCLUDED} from \"./internal/Link\";\nimport DEFAULT_OPTIONS from \"./internal/defaultOptions\";\nimport {END_EVENT, ERROR_EVENT, HTML_EVENT, JUNK_EVENT, LINK_EVENT, PAGE_EVENT, QUEUE_EVENT, SITE_EVENT} from \"./internal/events\";\nimport Gauge from \"gauge\";\nimport {GET} from \"http-methods-constants\";\nimport {gray, green, red, white, yellow} from \"chalk\";\nimport {HtmlUrlChecker, SiteChecker} from \"./\";\nimport humanizeDuration from \"humanize-duration\";\nimport longest from \"longest\";\nimport {make_scanner as scanKeys} from \"keyscan\";\nimport notifier from \"node-notifier\";\nimport {pathToFileURL} from \"url\";\nimport stripAnsi from \"strip-ansi\";\nimport supportsSemigraphics from \"supports-semigraphics\";\nimport {themes as gaugeThemes} from \"gauge/themes\";\nimport {version as packageVersion} from \"../package.json\";\n\n\n\nconst title = \"Broken Link Checker\";\nlet checker,checkerOptions,gauge,keyScanner,logOptions,pauseMessage,spinner,stats,urls;\n\n\n\nconst argsToOptions = args =>\n{\n\tconst renames =\n\t{\n\t\texclude: \"excludedKeywords\",\n\t\texcludeExternal: \"excludeExternalLinks\",\n\t\texcludeInternal: \"excludeInternalLinks\",\n\t\tfollow: \"followRobotExclusions\",\n\t\thostRequests: \"maxSocketsPerHost\",\n\t\tinclude: \"includedKeywords\",\n\t\tordered: \"maintainLinkOrder\",\n\t\trequests: \"maxSockets\"\n\t};\n\n\treturn Object.entries(args).reduce((opts, [argName, argValue]) =>\n\t{\n\t\tif (argName in renames)\n\t\t{\n\t\t\topts[ renames[argName] ] = argValue;\n\t\t}\n\t\telse if (argName in DEFAULT_OPTIONS)\n\t\t{\n\t\t\topts[argName] = argValue;\n\t\t}\n\t\telse if (args.get)\n\t\t{\n\t\t\topts.requestMethod = GET;\n\t\t}\n\n\t\treturn opts;\n\t}, {});\n};\n\n\n\nconst log = (...args) =>\n{\n\t// Avoid spinner/progress chars getting stuck in the log\n\tgauge.hide();\n\n\tconsole.log(...args);\n\n\tgauge.show();\n};\n\n\n\nconst logPage = pageURL =>\n{\n\tlog(`${white(\"\\nGetting links from:\")} ${yellow(pageURL)}`);\n};\n\n\n\nconst logPageMetrics = () =>\n{\n\tlet output = gray(`Finished! ${stats.page.totalLinks} links found.`);\n\n\tif (stats.page.skippedLinks > 0)\n\t{\n\t\toutput += gray(` ${stats.page.skippedLinks} skipped.`);\n\t}\n\n\tif (stats.page.totalLinks > 0)\n\t{\n\t\toutput += gray(\" \");\n\n\t\tif (stats.page.brokenLinks > 0)\n\t\t{\n\t\t\toutput += red(`${stats.page.brokenLinks} broken`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput += green(`${stats.page.brokenLinks} broken`);\n\t\t}\n\n\t\toutput += gray(\".\");\n\t}\n\n\tlog(output);\n};\n\n\n\nconst logProgress = () =>\n{\n\tconst links = checker.numActiveLinks + checker.numQueuedLinks;\n\n\tconst pageCompletion = links>0 ? 1/links : 0;\n\n\tif (logOptions.recursive)\n\t{\n\t\tgauge.show(`Links:${links} Pages:${checker.numPages} Sites:${checker.numSites}`, pageCompletion);\n\t}\n\telse\n\t{\n\t\tgauge.show(`Links:${links} Pages:${checker.numPages}`, pageCompletion);\n\t}\n};\n\n\n\nconst logResult = /*(*/result/*, finalResult)*/ =>\n{\n\tif (result.displayed)\n\t{\n\t\t// @todo if the last result is skipped, the last RENDERED result will not be \"└─\"\n\t\tlet output = gray( /*finalResult!==true ?*/ \"├─\" /*: \"└─\"*/ );\n\n\t\tconst {link} = result;\n\n\t\tif (link.get(IS_BROKEN))\n\t\t{\n\t\t\toutput += red(\"BROKEN\");\n\t\t\toutput += gray(\"─ \");\n\t\t}\n\t\telse if (link.get(WAS_EXCLUDED))\n\t\t{\n\t\t\toutput += gray(\"─SKIP── \");\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput += gray(\"──\");\n\t\t\toutput += green(\"OK\");\n\t\t\toutput += gray(\"─── \");\n\t\t}\n\n\t\t// @todo is ORIGINAL_URL only for invalid links?\n\t\toutput += yellow( link.get(REBASED_URL) ?? link.get(ORIGINAL_URL) );\n\n\t\tif (link.get(IS_BROKEN))\n\t\t{\n\t\t\toutput += gray(` (${link.get(BROKEN_REASON)})`);\n\t\t}\n\t\telse if (link.get(WAS_EXCLUDED))\n\t\t{\n\t\t\toutput += gray(` (${link.get(EXCLUDED_REASON)})`);\n\t\t}\n\t\t// Don't display cached message if broken/excluded message is displayed\n\t\telse if (link.get(HTTP_RESPONSE_WAS_CACHED))\n\t\t{\n\t\t\toutput += gray(\" (CACHED)\");\n\t\t}\n\n\t\tlog(output);\n\t}\n};\n\n\n\n/**\n * Logs links in the order that they are found in their containing HTML\n * document, even if later links receive an earlier response.\n */\nconst logResults = () =>\n{\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true)\n\t{\n\t\tconst result = stats.page.results[stats.page.currentIndex];\n\n\t\tif (result !== undefined)\n\t\t{\n\t\t\t//const final = stats.page.currentIndex>=stats.page.results.length-1 && checker.numActiveLinks===0 && checker.numQueuedLinks===0;\n\n\t\t\tlogResult(result/*, final*/);\n\n\t\t\tstats.page.currentIndex++;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbreak;\n\t\t}\n\t}\n};\n\n\n\nconst logSite = () =>\n{\n\tlet output = \"\";\n\n\tif (++stats.site.totalPages > 1)\n\t{\n\t\toutput += \"\\n\";\n\t}\n\n\toutput += white(\"\\nStarting recursive scan...\");\n\n\tlog(output);\n};\n\n\n\n// @todo number of unique/uncached links\n// @todo \"excluded links\" [from cli] doesn't make sense with a value of 0 when there're skipped links in the log\nconst logSiteMetrics = () =>\n{\n\tlet output = \"\";\n\toutput += gray(`\\nLinks found: ${stats.site.totalLinks}`);\n\toutput += gray(`\\nLinks skipped: ${stats.site.skippedLinks}`);\n\toutput += gray(`\\nLinks successful: ${stats.site.totalLinks - stats.site.skippedLinks - stats.site.brokenLinks}`);\n\n\tlet broken;\n\n\tif (stats.site.totalLinks > 0)\n\t{\n\t\tbroken = stats.site.brokenLinks>0 ? red : green;\n\t}\n\telse\n\t{\n\t\tbroken = gray;\n\t}\n\n\toutput += broken(`\\nLinks broken: ${stats.site.brokenLinks}`);\n\toutput += gray(\"\\nTime elapsed: \");\n\toutput += gray( humanizeDuration(Date.now() - stats.site.startTime, {largest:2, round:true}) );\n\n\tconst separator = gray(\"=\".repeat( longest(stripAnsi(output).split(\"\\n\")).length ));\n\n\tlog(`\\n${separator}${output}\\n${separator}\\n`);\n};\n\n\n\nconst run = () =>\n{\n\tObject.values(gaugeThemes).forEach(theme =>\n\t{\n\t\t//theme.preProgressbar = `\\n\\n${theme.preProgressbar}`;\n\t\ttheme.preSubsection = gray(\"—\");\n\t});\n\n\tgauge = new Gauge();\n\tstats = new Statistics();\n\n\tif (logOptions.recursive)\n\t{\n\t\tchecker = new SiteChecker(checkerOptions);\n\t}\n\telse\n\t{\n\t\tchecker = new HtmlUrlChecker(checkerOptions);\n\t}\n\n\tchecker\n\t.on(HTML_EVENT, (tree, robots, response, pageURL) =>\n\t{\n\t\tlogPage(pageURL);\n\t})\n\t.on(QUEUE_EVENT, () =>\n\t{\n\t\tlogProgress();\n\t})\n\t.on(JUNK_EVENT, link =>\n\t{\n\t\tstats.pushResult(link);\n\t\tlogProgress();\n\t\tlogResults();\n\t})\n\t.on(LINK_EVENT, link =>\n\t{\n\t\tstats.pushResult(link);\n\t\tlogProgress();\n\t\tlogResults();\n\t})\n\t.on(PAGE_EVENT, (error, pageURL) =>\n\t{\n\t\tif (error != null)\n\t\t{\n\t\t\t// HTML_EVENT will not have been called\n\t\t\tlogPage(pageURL);\n\n\t\t\tif (error.code<200 || error.code>299)\n\t\t\t{\n\t\t\t\tlog( red(`${error.name}: ${error.message}`) );\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlog( gray(`${error.name}: ${error.message}`) );\n\t\t\t}\n\n\t\t\tprocess.exitCode = 1;\n\t\t}\n\t\t// If more than a total of one page will be scanned\n\t\telse if (logOptions.recursive || urls.length>1)\n\t\t{\n\t\t\tlogPageMetrics();\n\t\t\tlogProgress();\n\t\t\tstats.resetPage();\n\n\t\t\t// If nothing after current page\n\t\t\tif (checker.numPages === 1)\n\t\t\t{\n\t\t\t\tlogSiteMetrics();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlogSiteMetrics();\n\t\t}\n\t})\n\t.on(SITE_EVENT, () =>\n\t{\n\t\tlogSiteMetrics();\n\t\tstats.resetSite();\n\t})\n\t.on(END_EVENT, () =>\n\t{\n\t\t// @todo store multiple site stats in an array and log all site metrics at very end?\n\n\t\tif (supportsSemigraphics())\n\t\t{\n\t\t\t// Exit gracefully\n\t\t\tclearTimeout(spinner);\n\t\t\tgauge.disable();\n\t\t\tkeyScanner.release();\n\n\t\t\t// @todo https://github.com/mikaelbr/node-notifier/issues/174\n\t\t\tnotifier.notify({ message:\"Finished!\", title });\n\t\t}\n\t})\n\t.on(ERROR_EVENT, error =>\n\t{\n\t\tconsole.error(error);\n\n\t\t// eslint-disable-next-line no-process-exit\n\t\tprocess.exit(1);\n\t});\n\n\tif (logOptions.recursive)\n\t{\n\t\tlogSite();\n\t}\n\n\tif (supportsSemigraphics())\n\t{\n\t\t// Show pause message\n\t\ttogglePause(false);\n\n\t\tkeyScanner = scanKeys(key =>\n\t\t{\n\t\t\tif (key.parsed === \"space\")\n\t\t\t{\n\t\t\t\ttogglePause();\n\t\t\t}\n\t\t});\n\t}\n\telse\n\t{\n\t\tgauge.disable();\n\t}\n\n\ttry\n\t{\n\t\tchecker.pause();  // avoid auto-start\n\n\t\turls\n\t\t.map(url =>\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\turl = new URL(url);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\turl = pathToFileURL(url);\n\t\t\t}\n\n\t\t\treturn url;\n\t\t})\n\t\t.forEach(url => checker.enqueue(url));\n\n\t\tchecker.resume();  // start, if above didn't throw\n\t}\n\tcatch ({message})\n\t{\n\t\tconsole.error(message);\n\t\tprocess.exitCode = 1;\n\t}\n};\n\n\n\nconst spinnerInterval = () =>\n{\n\tspinner = setTimeout(() =>\n\t{\n\t\tgauge.pulse(pauseMessage);\n\t\tspinnerInterval();\n\t}, 50);\n};\n\n\n\nclass Statistics\n{\n\tconstructor()\n\t{\n\t\tthis.page = {};\n\t\tthis.site = {};\n\t\tthis.resetSite();\n\t}\n\n\tpushResult(link)\n\t{\n\t\tconst result = { displayed:true, link };\n\n\t\tconst hideCachedLink   = logOptions.hideCachedLinks   && link.get(IS_BROKEN)===false && link.get(HTTP_RESPONSE_WAS_CACHED);\n\t\tconst hideSkippedLink  = logOptions.hideSkippedLinks  && link.get(WAS_EXCLUDED);\n\t\tconst hideUnbrokenLink = logOptions.hideUnbrokenLinks && link.get(IS_BROKEN)===false;\n\n\t\tif (hideCachedLink || hideSkippedLink || hideUnbrokenLink)\n\t\t{\n\t\t\tthis.page.hiddenLinks++;\n\t\t\tthis.site.hiddenLinks++;\n\t\t\tresult.displayed = false;\n\t\t}\n\n\t\tif (link.get(IS_BROKEN))\n\t\t{\n\t\t\tthis.page.brokenLinks++;\n\t\t\tthis.site.brokenLinks++;\n\t\t\tprocess.exitCode = 1;\n\t\t}\n\t\telse if (link.get(WAS_EXCLUDED))\n\t\t{\n\t\t\tthis.page.skippedLinks++;\n\t\t\tthis.site.skippedLinks++;\n\t\t}\n\n\t\tthis.page.totalLinks++;\n\t\tthis.site.totalLinks++;\n\n\t\tif (logOptions.maintainLinkOrder)\n\t\t{\n\t\t\tthis.page.results[link.get(HTML_INDEX)] = result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.page.results.push(result);\n\t\t}\n\t}\n\n\tresetPage()\n\t{\n\t\tthis.page.brokenLinks = 0;\n\t\tthis.page.currentIndex = 0;\n\t\tthis.page.hiddenLinks = 0;\n\t\tthis.page.results = [];\n\t\tthis.page.skippedLinks = 0;\n\t\t//this.page.startTime = Date.now();\n\t\tthis.page.totalLinks = 0;\n\t}\n\n\tresetSite()\n\t{\n\t\tthis.resetPage();\n\t\tthis.site.brokenLinks = 0;\n\t\tthis.site.hiddenLinks = 0;\n\t\tthis.site.skippedLinks = 0;\n\t\tthis.site.startTime = Date.now();\n\t\tthis.site.totalLinks = 0;\n\t\tthis.site.totalPages = 0;\n\t}\n}\n\n\n\nconst togglePause = pause =>\n{\n\tif (pause === undefined)\n\t{\n\t\tpause = !checker.isPaused;\n\t}\n\n\tif (pause)\n\t{\n\t\tchecker.pause();\n\n\t\tpauseMessage = `${yellow(\"PAUSED\")}${gray(\" — press space to resume\")}`;\n\t\tgauge.pulse(pauseMessage);\n\t\tclearTimeout(spinner);\n\t}\n\telse\n\t{\n\t\tchecker.resume();\n\n\t\tpauseMessage = gray(\"press space to pause\");\n\t\tspinner = spinnerInterval();\n\t}\n\n\tlogProgress();\n};\n\n\n\nexport default (args=process.argv) =>\n{\n\tconst filterLevel =\n\t[\n\t\t\"--filter-level:\",\n\t\t\"  0: clickable links\",\n\t\t\"  1: 0 + media, frames, meta refreshes\",\n\t\t\"  2: 1 + stylesheets, scripts, forms\",\n\t\t\"  3: 2 + metadata\"\n\t].join(\"\\n\");\n\n\tconst verbosity =\n\t[\n\t\t\"--verbosity:\",\n\t\t\"  0: broken links\",\n\t\t\"  1: 0 + unbroken links\",\n\t\t\"  2: 1 + skipped links\"\n\t].join(\"\\n\");\n\n\t/* eslint-disable sort-keys */\n\tconst optionator = require(\"optionator\")(\n\t{\n\t\tprepend: `${yellow(title.toUpperCase())}\\n\\n${green(\"Usage:\")} blc [options] url1 [url2 ...]`,\n\t\tappend: `${gray(filterLevel)}\\n\\n${gray(verbosity)}\\n`,\n\t\toptions:\n\t\t[\n\t\t\t{ heading:\"Common Options\" },\n\t\t\t{ option:\"recursive\",        alias:\"r\", type:\"Boolean\",  description:`Recursively scan (\"crawl\") the HTML document(s)`,                   default:\"false\" },\n\n\t\t\t{ heading:\"Filtering Options\" },\n\t\t\t{ option:\"exclude\",                     type:\"[String]\", description:\"Skip checking of links that match keywords/glob\" },\n\t\t\t{ option:\"exclude-external\", alias:\"e\", type:\"Boolean\",  description:\"Skip checking of external links\",                                   default:\"false\" },\n\t\t\t{ option:\"exclude-internal\", alias:\"i\", type:\"Boolean\",  description:\"Skip checking of internal links\",                                   default:\"false\" },\n\t\t\t{ option:\"filter-level\",                type:\"Number\",   description:\"Include checking of links by HTML properties\",                      default:`${DEFAULT_OPTIONS.filterLevel}` },\n\t\t\t{ option:\"follow\",           alias:\"f\", type:\"Boolean\",  description:\"Force-follow robot exclusions\",                                     default:\"false\" },\n\t\t\t{ option:\"include\",                     type:\"[String]\", description:\"Only check links that match keywords/glob\" },\n\n\t\t\t{ heading:\"Display Options\" },\n\t\t\t{ option:\"help\",             alias:\"h\", type:\"Boolean\",  description:\"Display this help text\",                                            default:\"false\" },\n\t\t\t{ option:\"ordered\",          alias:\"o\", type:\"Boolean\",  description:\"Maintain the order of links as they appear in their HTML document\", default:\"false\" },\n\t\t\t{ option:\"verbosity\",                   type:\"Number\",   description:\"The display verbosity level\",                                       default:\"1\" },\n\t\t\t{ option:\"version\",          alias:\"v\", type:\"Boolean\",  description:\"Display the app version\",                                           default:\"false\" },\n\n\t\t\t{ heading:\"Advanced Options\" },\n\t\t\t{ option:\"get\",              alias:\"g\", type:\"Boolean\",  description:\"Change request method to GET\",                                      default:\"false\" },\n\t\t\t{ option:\"host-requests\",               type:\"Number\",   description:\"Concurrent requests limit per host\",                                default:`${DEFAULT_OPTIONS.maxSocketsPerHost}` },\n\t\t\t{ option:\"requests\",                    type:\"Number\",   description:\"Concurrent requests limit \",                                        default:`${DEFAULT_OPTIONS.maxSockets}` },\n\t\t\t{ option:\"user-agent\",                  type:\"String\",   description:\"The user agent to use for checking links\" }\n\t\t]\n\t});\n\t/* eslint-disable sort-keys */\n\n\ttry\n\t{\n\t\tif (args === process.argv)\n\t\t{\n\t\t\targs = optionator.parseArgv(args);\n\t\t}\n\t\telse\n\t\t{\n\t\t\targs = optionator.parse(args);\n\t\t}\n\t}\n\tcatch (error)\n\t{\n\t\targs = error;\n\t}\n\n\tif (args instanceof Error)\n\t{\n\t\tconsole.error(args.message);\n\t\tprocess.exitCode = 1;\n\t}\n\telse if (args.help)\n\t{\n\t\tconsole.log( optionator.generateHelp() );\n\t}\n\telse if (args.version)\n\t{\n\t\tconsole.log(packageVersion);\n\t}\n\telse if (args._.length > 0)\n\t{\n\t\turls = args._;\n\t\tcheckerOptions = argsToOptions(args);\n\t\tlogOptions =\n\t\t{\n\t\t\thideCachedLinks:   args.verbosity < 2,\n\t\t\thideSkippedLinks:  args.verbosity < 2,\n\t\t\thideUnbrokenLinks: args.verbosity < 1,\n\t\t\tmaintainLinkOrder: args.ordered,\n\t\t\trecursive:         args.recursive === true  // default value is undefined\n\t\t};\n\n\t\trun();\n\t}\n\telse\n\t{\n\t\tconsole.error(\"At least one URL is required; see '--help'\");\n\t\tprocess.exitCode = 1;\n\t}\n};\n"],"mappings":"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"}